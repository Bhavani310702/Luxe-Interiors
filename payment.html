<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout Payment</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <style>
    :root {
      --primary-color: #c9a55c;
      --secondary-color: #b08d3c;
      --accent-color: #8a6d2f;
      --light-gray: #f9f7f2;
      --dark-gray: #5a5245;
      --success-color: #8a7229;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #ffffff;
      color: #5a5245;
    }
    
    .header-container {
      background-color: white;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
      padding: 1.5rem 0;
      margin-bottom: 2rem;
    }
    
    .main-container {
      background-color: white;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
      padding: 2rem;
      margin-bottom: 3rem;
    }
    
    .page-title {
      color: var(--dark-gray);
      font-weight: 600;
      position: relative;
      padding-bottom: 10px;
      margin-bottom: 1.5rem;
    }
    
    .page-title:after {
      content: '';
      position: absolute;
      left: 0;
      bottom: 0;
      height: 3px;
      width: 60px;
      background-color: var(--primary-color);
    }
    
    .section-title {
      font-size: 1.5rem;
      color: var(--dark-gray);
      font-weight: 500;
      margin-bottom: 1.25rem;
    }
    
    .item-card {
      background-color: var(--light-gray);
      border-radius: 8px;
      padding: 1.25rem;
      margin-bottom: 1.5rem;
      border-left: 4px solid var(--primary-color);
      transition: transform 0.2s;
    }
    
    .item-card:hover {
      transform: translateY(-3px);
    }
    
    .item-image {
      border-radius: 6px;
      max-width: 120px;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
    }
    
    .item-name {
      font-weight: 600;
      color: var(--dark-gray);
      margin-bottom: 0.75rem;
    }
    
    .price-tag {
      color: var(--dark-gray);
      font-size: 0.95rem;
    }
    
    .total-highlight {
      font-weight: 600;
      color: var(--accent-color);
    }
    
    .grand-total-container {
      background-color: var(--light-gray);
      border-radius: 8px;
      padding: 1.25rem;
      margin: 2rem 0;
      border: 1px dashed var(--primary-color);
    }
    
    .grand-total-text {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--dark-gray);
      margin: 0;
    }
    
    .grand-total-value {
      color: var(--accent-color);
      font-weight: 700;
    }
    
    .btn-custom-primary {
      background-color: var(--primary-color);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      font-weight: 600;
      border-radius: 6px;
      transition: all 0.3s;
    }
    
    .btn-custom-primary:hover {
      background-color: var(--secondary-color);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(139, 109, 47, 0.25);
    }
    
    .btn-custom-success {
      background-color: var(--success-color);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      font-weight: 600;
      border-radius: 6px;
      transition: all 0.3s;
    }
    
    .btn-custom-success:hover {
      background-color: #72601f;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(139, 109, 47, 0.25);
    }
    
    .form-container {
      border: 1px solid #e9ecef;
      border-radius: 8px;
      padding: 2rem;
      background-color: white;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }
    
    .form-label {
      font-weight: 500;
      color: var(--dark-gray);
      margin-bottom: 0.5rem;
    }
    
    .form-control, .form-select {
      border-radius: 6px;
      padding: 0.75rem;
      border: 1px solid #ced4da;
      transition: all 0.3s;
    }
    
    .form-control:focus, .form-select:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 0.2rem rgba(67, 97, 238, 0.25);
    }
    
    .payment-method-option {
      position: relative;
      padding-left: 30px;
      margin-bottom: 10px;
      cursor: pointer;
    }
    
    .separator {
      height: 1px;
      background-color: #e9ecef;
      margin: 2rem 0;
    }
    
    .icon-circle {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: var(--light-gray);
      margin-right: 10px;
      color: var(--primary-color);
    }
    
    @media (max-width: 768px) {
      .main-container {
        padding: 1.5rem;
      }
      
      .form-container {
        padding: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <div class="header-container">
    <div class="container">
      <div class="d-flex align-items-center mb-3">
        <!-- <img src="/api/placeholder/160/60" alt="LUXE Interior Design" style="height: 60px;"> -->
      </div>
      <h1 class="page-title">Secure Checkout</h1>
    </div>
  </div>

  <div class="container">
    <div class="main-container">
      <div class="row">
        <div class="col-lg-8">
          <!-- Order Summary Section -->
          <h2 class="section-title">
            <i class="fas fa-shopping-cart icon-circle"></i>
            Order Summary
          </h2>
          <div id="payment-details" class="order-summary"></div>
          
          <div class="grand-total-container">
            <div class="d-flex justify-content-between align-items-center">
              <h3 class="grand-total-text">Grand Total:</h3>
              <h3 class="grand-total-text">₹<span id="grand-total" class="grand-total-value">0</span></h3>
            </div>
          </div>
          
          <div class="text-center mb-4">
            <button class="btn btn-custom-primary" onclick="showBillingForm()">
              <i class="fas fa-credit-card me-2"></i>Proceed to Payment
            </button>
          </div>
        </div>
        
        <div class="col-lg-4">
          <div class="mb-4 p-3" style="background-color: var(--light-gray); border-left: 3px solid var(--primary-color); border-radius: 4px;">
            <h4><i class="fas fa-shield-alt me-2" style="color: var(--primary-color)"></i>Secure Transaction</h4>
            <p class="mb-0 text-muted">Your payment information is protected by secure encryption technology.</p>
          </div>
          
          <div class="mb-4 p-3" style="background-color: var(--light-gray); border-left: 3px solid var(--primary-color); border-radius: 4px;">
            <h4><i class="fas fa-truck me-2" style="color: var(--primary-color)"></i>Home Delivery</h4>
            <p class="mb-0 text-muted">Professional delivery service right to your doorstep.</p>
          </div>
          
          <div class="p-3" style="background-color: var(--light-gray); border-left: 3px solid var(--primary-color); border-radius: 4px;">
            <h4><i class="fas fa-tools me-2" style="color: var(--primary-color)"></i>Installation Service</h4>
            <p class="mb-0 text-muted">Expert installation available for all furniture items.</p>
          </div>
        </div>
      </div>
      
      <!-- Billing Address Form -->
      <div id="billing-form" class="form-container mt-4" style="display: none;">
        <h2 class="section-title">
          <i class="fas fa-file-invoice icon-circle"></i>
          Billing Information
        </h2>
        
        <form id="form">
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="name" class="form-label">Full Name</label>
              <input type="text" class="form-control" id="name" placeholder="Enter your full name" required>
            </div>
            
            <div class="col-md-6 mb-3">
              <label for="email" class="form-label">Email Address</label>
              <div class="input-group">
                <span class="input-group-text bg-light"><i class="fas fa-envelope"></i></span>
                <input type="email" class="form-control" id="email" placeholder="you@example.com" required>
              </div>
            </div>
          </div>
          
          <div class="mb-3">
            <label for="phone" class="form-label">Phone Number</label>
            <div class="input-group">
              <span class="input-group-text bg-light"><i class="fas fa-phone"></i></span>
              <input type="tel" class="form-control" id="phone" placeholder="Your contact number" required>
            </div>
          </div>
          
          <div class="mb-3">
            <label for="address" class="form-label">Address</label>
            <textarea class="form-control" id="address" rows="2" placeholder="Enter your street address" required></textarea>
          </div>
          
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="city" class="form-label">City</label>
              <input type="text" class="form-control" id="city" placeholder="City" required>
            </div>
            <div class="col-md-6 mb-3">
              <label for="state" class="form-label">State</label>
              <input type="text" class="form-control" id="state" placeholder="State/Province" required>
            </div>
          </div>
          
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="zip" class="form-label">Zip / Postal Code</label>
              <input type="text" class="form-control" id="zip" placeholder="Postal code" required>
            </div>
            <div class="col-md-6 mb-3">
              <label for="country" class="form-label">Country</label>
              <input type="text" class="form-control" id="country" placeholder="Country" required>
            </div>
          </div>
          
          <div class="separator"></div>
          
          <h4 class="mb-3">Payment Method</h4>
          <div class="mb-4">
            <div class="form-check mb-2">
              <input class="form-check-input" type="radio" name="payment-method-radio" id="cod-option" value="COD" checked>
              <label class="form-check-label" for="cod-option">
                <i class="fas fa-money-bill-wave me-2 text-success"></i>Cash on Delivery
              </label>
            </div>
            <div class="form-check mb-2">
              <input class="form-check-input" type="radio" name="payment-method-radio" id="card-option" value="Card">
              <label class="form-check-label" for="card-option">
                <i class="fas fa-credit-card me-2 text-primary"></i>Credit/Debit Card
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="payment-method-radio" id="upi-option" value="UPI">
              <label class="form-check-label" for="upi-option">
                <i class="fas fa-mobile-alt me-2 text-info"></i>UPI
              </label>
            </div>
            
            <input type="hidden" id="payment-method" value="COD">
          </div>
          
          <div class="text-center">
            <button type="submit" class="btn btn-custom-success">
              <i class="fas fa-lock me-2"></i>Complete Payment
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    function loadPaymentDetails() {
      let paymentMode = localStorage.getItem('paymentMode');

      let items = [];
      let grandTotal = 0;
      const paymentDiv = document.getElementById('payment-details');

      if (paymentMode === 'single') {
        let item = JSON.parse(localStorage.getItem('selectedItem'));
        items.push(item);
      } else if (paymentMode === 'all') {
        items = JSON.parse(localStorage.getItem('cart')) || [];
      }

      if (items.length === 0) {
        paymentDiv.innerHTML = '<div class="alert alert-info">No items selected for checkout.</div>';
        return;
      }

      items.forEach(item => {
        let itemTotal = item.cost * (item.quantity || 1);
        grandTotal += itemTotal;

        const itemDiv = document.createElement('div');
        itemDiv.className = 'item-card';

        itemDiv.innerHTML = `
          <div class="row align-items-center">
            <div class="col-md-2 col-sm-3 mb-3 mb-md-0 text-center">
              <img src="${item.image}" class="img-fluid item-image" alt="${item.name}">
            </div>
            <div class="col-md-7 col-sm-6 mb-3 mb-md-0">
              <h5 class="item-name">${item.name}</h5>
              <p class="price-tag mb-1">Price: ₹${item.cost.toLocaleString()}</p>
              <p class="price-tag mb-0">Quantity: ${item.quantity || 1}</p>
            </div>
            <div class="col-md-3 col-sm-3 text-end">
              <p class="price-tag mb-0">Subtotal:</p>
              <p class="total-highlight">₹${itemTotal.toLocaleString()}</p>
            </div>
          </div>
        `;

        paymentDiv.appendChild(itemDiv);
      });

      document.getElementById('grand-total').innerText = grandTotal.toLocaleString();
    }

    function showBillingForm() {
      document.getElementById('billing-form').style.display = 'block';
      window.scrollTo({ top: document.getElementById('billing-form').offsetTop - 50, behavior: 'smooth' });
    }

    // Handle payment method selection
    document.querySelectorAll('input[name="payment-method-radio"]').forEach(radio => {
      radio.addEventListener('change', function() {
        document.getElementById('payment-method').value = this.value;
      });
    });

    // Handle Billing Form Submission
    document.getElementById('form').addEventListener('submit', function(e) {
      e.preventDefault();

      // Get user input
      let name = document.getElementById('name').value;
      let email = document.getElementById('email').value;
      let phone = document.getElementById('phone').value;
      let address = document.getElementById('address').value;
      let city = document.getElementById('city').value;
      let state = document.getElementById('state').value;
      let zip = document.getElementById('zip').value;
      let country = document.getElementById('country').value;
      let paymentMethod = document.getElementById('payment-method').value;

      // Check all fields filled
      if (name && email && phone && address && city && state && zip && country && paymentMethod) {
        // Show success modal instead of alert
        const modalHTML = `
          <div class="modal fade" id="successModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header bg-success text-white">
                  <h5 class="modal-title">Payment Successful</h5>
                  <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <div class="text-center mb-4">
                    <i class="fas fa-check-circle text-success" style="font-size: 4rem;"></i>
                    <h4 class="mt-3">Thank you for your purchase!</h4>
                  </div>
                  <div class="p-3 bg-light rounded">
                    <p><strong>Name:</strong> ${name}</p>
                    <p><strong>Email:</strong> ${email}</p>
                    <p><strong>Phone:</strong> ${phone}</p>
                    <p><strong>Address:</strong> ${address}, ${city}, ${state}, ${zip}, ${country}</p>
                    <p><strong>Payment Method:</strong> ${paymentMethod}</p>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-success" onclick="redirectToHome()">Back to Home</button>
                </div>
              </div>
            </div>
          </div>
        `;
        
        // Append modal to body
        document.body.insertAdjacentHTML('beforeend', modalHTML);
        
        // Load Bootstrap JS for modal functionality
        const script = document.createElement('script');
        script.src = 'https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js';
        document.body.appendChild(script);
        
        script.onload = function() {
          const successModal = new bootstrap.Modal(document.getElementById('successModal'));
          successModal.show();
          
          // Clear storage
          localStorage.removeItem('paymentMode');
          localStorage.removeItem('selectedItem');
        };
      } else {
        alert('Please fill in all the details!');
      }
    });
    
    function redirectToHome() {
      window.location.href = "home.html";
    }

    loadPaymentDetails();
  </script>
</body>
</html>